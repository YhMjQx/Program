# 交换机的工作原理

1.交换机他是属于数据链路层的设备，数据链路层的传输单元是数据帧（PDU）， 数据帧会在原有数据前封装MAC头部（主要有源MAC地址，目的MAC地址）差错校验

## 2.数据链路层的功能

- 建立逻辑连接，进行物理地址寻址，差错校验
- 数据链路的建立，维护和拆除
- 数据帧的封装，传输，同步，差错校验，在数据链路层也可以做流量控制（但是这个流量控制一般不会在数据链路层做）

## 3.以太网

- 以太网标准（ 802局域网标准）
- 以太网 = 局域网（目前暂时可以看做是等于的）

## 4.交换机主要讲的是以太网交换机（局域网交换机）

## 5.以太网的基本概念

## 6.以太网的发展史

- 10BASE-T
- 100BASE-T
- 1000BASE-T

## 7.早期的网络是共享式网络，目前所使用的是交换式网络

- 交换式网络
  - 以太网交换机
  - 以太网MAC地址（在目前的所有网络接口都具有一个全球唯一的以太网MAC地址）

## 8.以太网MAC

- 用来标识一个**以太网**中的单独设备或一组设备（IP地址是用来标识网络中的某一台主机）

  - 两个设备要想在以太网中进行通信，就必须要进行MAC地址进行交互
  - 两个设备需要在网络中进行通信，就必须要配置相应的IP地址（跨越不同网络通信时，两台主机之间是无法直接获取对方的MAC地址的，于是就需要使用IP地址通过中间设备来寻找主机） 

- MAC地址由 48 个二进制组成，通常表示为12位的十六进制

  ```
  3A-7A-0E-C5-0F-44
  00111010-01111010-00001110-11000101-00001111-01000100
  ```

- 一个MAC地址的表示方式：前面24位表示了厂商的编码，后面24位是序列号。从而可以实现全球唯一

- 单独设备：当第8位（二进制的第8位）为0时，是单独设备——单播地址

- 一组设备：当第8位（二进制的第8位）为1时，是一组设备——组播地址

- 所有设备：FF-FF-FF-FF-FF-FF，一个全为1的MAC地址——广播地址

- 00-00-00-00-00-00：当不知道对方的MAC地址时，会自动填充一个目的MAC地址——默认填充地址

## 9.以太网的帧

- Ethernet Ⅱ
- IEEE802.3帧（适用于所有网络设备）
  - Type和Length：都是用于去标识上层数据的类型
    - 上层是是网络层
    - 由于在网络层有不同协议：IP（0800）    ARP（0806）    ICMP    IGMP   RARP
- ![](https://img-blog.csdnimg.cn/deff36b3cda64404ada6caceaa8cef2a.png)



![img](https://img-blog.csdnimg.cn/2faa021fd4244fb8a39f548e6aa56663.png)

![在这里插入图片描述](https://img-blog.csdnimg.cn/1b09d0b5a6644926ab221a3ce7232336.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQwMzA5MzQx,size_16,color_FFFFFF,t_70)



![image-20230716150440157](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20230716150440157.png)



**LLC和MAC**

![image-20230716152643021](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20230716152643021.png)

数据链路层

- 以太网
  - 以太网MAC地址
  - 以太网帧
  - 以太网交换机
    - 在早期的时候共享式网络是怎么样的

## 10.以太网交换机

- 早期的共享式以太网，它是由集线器（HUB）相连

  - 一个冲突域网络

  ![image-20230716181051201](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20230716181051201.png)

- 现在采用交换式网络（以太网交换机）

  ![image-20230716184043558](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20230716184043558.png)

  ![image-20230716184948683](C:\Users\hp\AppData\Roaming\Typora\typora-user-images\image-20230716184948683.png)

  - 广播：一种信息传播方式（一对多）
    - 当交换机收到主机A传来的数据帧后先查看数据帧头部，首先查看源MAC地址有没有在自己的MAC表中，如果没有就立刻记录下来（主机A---接口1）**；**
    - 然后继续查看目的MAC地址，有就直接单播转发，没有就进行广播式转发**；**此时主机B，C都可以接收到主机A发来的消息，主机C解剖数据发现目的MAC地址不是自己的，于是丢弃**；**
    - 主机B接收，并且主机B发送ACK数据帧，该ACK数据帧会送到接口2，此时就会将（主机B---接口2）记录下来，然后单播给接口1
    - **以太网交换机工作方式：首先学习源MAC地址，接着广播数据帧，然后接收方回应，其他主机丢弃，下一次该两主机转发就直接以单播方式转发数据**

- 工作模式：
  - 单工：数据只能单向传输
  - 半双工：数据可以双向传输，但不能同时进行
  - 全双工：数据可以双向并且同时传输
- 接口速率
  -  10
  - 100
  - 1000